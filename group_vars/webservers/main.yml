---
deploy_image: ghcr.io/titanmen1/project-devops-deploy:latest
deploy_container_name: bulletins

deploy_run_args: "--network bulletins-net"

deploy_host_dirs:
  - /opt/bulletins/data/bulletin-images
  - /opt/bulletins/logs

deploy_mounts:
  - /opt/bulletins/data/bulletin-images:/tmp/bulletin-images
  - /opt/bulletins/logs:/var/log/bulletins

deploy_ports:
  - "8080:8080"
  - "9090:9090"

deploy_extract_static: true
deploy_static_src_path: "/app/frontend-dist"
deploy_static_dest: "/opt/bulletins/static"

nginx_server_name: "hexlet-third-project.crabdance.com"
nginx_backend_port: 8080
nginx_management_port: 9090
nginx_serve_static: true
nginx_static_root: "/opt/bulletins/static"

deploy_env:
  SPRING_PROFILES_ACTIVE: "prod"
  SPRING_DATASOURCE_URL: "{{ vault_spring_datasource_url }}"
  SPRING_DATASOURCE_USERNAME: "{{ vault_spring_datasource_username }}"
  SPRING_DATASOURCE_PASSWORD: "{{ vault_spring_datasource_password }}"
  STORAGE_S3_BUCKET: "{{ vault_storage_s3_bucket }}"
  STORAGE_S3_REGION: "{{ vault_storage_s3_region }}"
  STORAGE_S3_ENDPOINT: "{{ vault_storage_s3_endpoint }}"
  STORAGE_S3_ACCESSKEY: "{{ vault_storage_s3_accesskey }}"
  STORAGE_S3_SECRETKEY: "{{ vault_storage_s3_secretkey }}"
  STORAGE_S3_CDNURL: "{{ vault_storage_s3_cdnurl }}"

deploy_registry: ghcr.io
deploy_registry_username: "{{ vault_ghcr_username }}"
deploy_registry_password: "{{ vault_ghcr_token }}"
